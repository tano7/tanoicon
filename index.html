<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>読めルンです。</title>
    <meta name="description" content="画像からテキストを生成し、タグ付けによる分類ができるウェブアプリです。">
    
    <!-- CSS -->
    <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script>
      $(function(){
	  //画像ファイルプレビュー表示のイベント追加 fileを選択時に発火するイベントを登録
	  $('form').on('change', 'input[type="file"]', function(e) {
	      var file = e.target.files[0],
		  reader = new FileReader(),
		  $preview = $(".preview");
	      t = this;

	      // 画像ファイル以外の場合は何もしない
	      if(file.type.indexOf("image") < 0){
		  return false;
	      }

	      // ファイル読み込みが完了した際のイベント登録
	      reader.onload = (function(file) {
		  return function(e) {
		      //既存のプレビューを削除
		      $preview.empty();
		      // .prevewの領域の中にロードした画像を表示するimageタグを追加
		      $preview.append($('<img>').attr({
			  src: e.target.result,
			  width: "150px",
			  class: "preview",
			  title: file.name
		      }));
		  };
	      })(file);

	      reader.readAsDataURL(file);
	  });
      });
      </script>
  </head>
  
  <body>
    <h1>読め<span>ルン</span>です。</h1>
    <h2>画像をアップロード</h2>
    
    <div class="upload-wrap">
      <div class="drag-area">
	<p>ここにファイルやフォルダをドラッグすると簡単に画像をアップロードできます</p>
      </div>
      <p>または...</p>
      <form action="./analysis.cgi" method="post" enctype="multipart/form-data">
	<input type="file" name="imgData" accept=".gif,.png,.jpg" capture="environment">
	<br>
	<input type="submit" class="submit-btn" value="送信">
      </form>
    </div>
    <div class="preview">
    </div>
</body>
</html>
